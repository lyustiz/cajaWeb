/*
Template Name: ASPSTUDIO - Responsive Bootstrap 5 Admin Template
Version: 2.3.0
Author: Sean Ngu
Website: http://www.seantheme.com/asp-studio/
	----------------------------
		APPS CONTENT TABLE
	----------------------------

	<!-- ======== GLOBAL SCRIPT SETTING ======== -->
	01. Global Variable
	02. Handle Scrollbar
	03. Handle Header Search Bar
	04. Handle Sidebar Menu
	05. Handle Sidebar Minify
	06. Handle Sidebar Minify Float Menu
	07. Handle Dropdown Close Option
	08. Handle Panel - Remove / Reload / Collapse / Expand
	09. Handle Tooltip & Popover Activation
	10. Handle Scroll to Top Button Activation
	11. Handle hexToRgba
	12. Handle Scroll to
	
	<!-- ======== APPLICATION SETTING ======== -->
	Application Controller
*/



/* 01. Global Variable
------------------------------------------------ */
var FONT_FAMILY    = '-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"';
var COLOR_BLUE     = '#1f6bff';
var COLOR_GREEN    = '#1abd36';
var COLOR_ORANGE   = '#ff9500';
var COLOR_RED      = '#ff3b30';
var COLOR_AQUA     = '#30beff';
var COLOR_PURPLE   = '#5b2e91';
var COLOR_YELLOW   = '#ffcc00';
var COLOR_INDIGO   = '#640df3';
var COLOR_PINK     = '#ff2d55';
var COLOR_TEAL     = '#0cd096';
var COLOR_BLACK    = '#000000';
var COLOR_WHITE    = '#FFFFFF';
var COLOR_GRAY_100 = '#ebeef4';
var COLOR_GRAY_200 = '#dae0ec';
var COLOR_GRAY_300 = '#c9d2e3';
var COLOR_GRAY_400 = '#a8b6d1';
var COLOR_GRAY_500 = '#869ac0';
var COLOR_GRAY_600 = '#657eae';
var COLOR_GRAY_700 = '#4d6593';
var COLOR_GRAY_800 = '#3c4e71';
var COLOR_GRAY_900 = '#212837';


/* 02. Handle Scrollbar
------------------------------------------------ */
var handleSlimScroll = function() {
	"use strict";
	$.when($('[data-scrollbar=true]').each( function() {
		generateSlimScroll($(this));
	})).done(function() {
		$('[data-scrollbar="true"]').mouseover();
	});
};
var generateSlimScroll = function(element) {
	var isMobile = (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));
	
	if ($(element).attr('data-init') || (isMobile && $(element).attr('data-skip-mobile'))) {
		return;
	}
	var dataHeight = $(element).attr('data-height');
		dataHeight = (!dataHeight) ? $(element).height() : dataHeight;

	var scrollBarOption = {
		height: dataHeight, 
		alwaysVisible: false
	};
	if(isMobile) {
		$(element).css('height', dataHeight);
		$(element).css('overflow-x','scroll');
	} else {
		$(element).slimScroll(scrollBarOption);
		$(element).closest('.slimScrollDiv').find('.slimScrollBar').hide();
	}
	$(element).attr('data-init', true);
};


/* 04. Handle Sidebar Menu
------------------------------------------------ */
var handleSidebarMenu = function() {
	"use strict";
	$(document).on('click', '.app-sidebar .menu > .menu-item.has-sub > .menu-link', function(e) {
		e.preventDefault();
		
		var target = $(this).next('.menu-submenu');
		var otherMenu = $('.app-sidebar .menu > .menu-item.has-sub > .menu-submenu').not(target);

		if ($('.app-sidebar-minified').length === 0) {
			$(otherMenu).slideUp(250);
			$(otherMenu).closest('.menu-item').removeClass('expand');
			
			$(target).slideToggle(250);
			var targetElm = $(target).closest('.menu-item');
			if ($(targetElm).hasClass('expand')) {
				$(targetElm).removeClass('expand');
			} else {
				$(targetElm).addClass('expand');
			}
		}
	});
	$(document).on('click', '.app-sidebar .menu > .menu-item.has-sub .menu-submenu .menu-item.has-sub > .menu-link', function(e) {
		e.preventDefault();
		
		if ($('.app-sidebar-minified').length === 0) {
			var target = $(this).next('.menu-submenu');
			$(target).slideToggle(250);
		}
	});
};


/* 05. Handle Sidebar Minify
------------------------------------------------ */
var MOBILE_SIDEBAR_TOGGLE_CLASS = 'app-sidebar-mobile-toggled';
var MOBILE_SIDEBAR_CLOSED_CLASS = 'app-sidebar-mobile-closed';
var handleSidebarMinify = function() {
	$('[data-toggle="sidebar-minify"]').on('click', function(e) {
		e.preventDefault();
		
		var targetElm = '#app';
		var targetClass = 'app-sidebar-minified';
		
		if ($(targetElm).hasClass(targetClass)) {
			$(targetElm).removeClass(targetClass);
			localStorage.removeItem('appSidebarMinified');
		} else {
			$(targetElm).addClass(targetClass);
			localStorage.setItem('appSidebarMinified', true);
		}
	});
	
	if (typeof(Storage) !== 'undefined') {
		if (localStorage.appSidebarMinified) {
			$('#app').addClass('app-sidebar-minified');
		}
	}
};
var handleSidebarMobileToggle = function() {
	$(document).on('click', '[data-toggle="sidebar-mobile"]', function(e) {
		e.preventDefault();
		
		var targetElm = '#app';
		
		$(targetElm).removeClass(MOBILE_SIDEBAR_CLOSED_CLASS).addClass(MOBILE_SIDEBAR_TOGGLE_CLASS);
	});
};
var handleSidebarMobileDismiss = function() {
	$(document).on('click', '[data-dismiss="sidebar-mobile"]', function(e) {
		e.preventDefault();
		
		var targetElm = '#app';
		
		$(targetElm).removeClass(MOBILE_SIDEBAR_TOGGLE_CLASS).addClass(MOBILE_SIDEBAR_CLOSED_CLASS);
		setTimeout(function() {
			$(targetElm).removeClass(MOBILE_SIDEBAR_CLOSED_CLASS);
		}, 250);
	});
};


/* 06. Handle Sidebar Minify Float Menu
------------------------------------------------ */
var floatSubMenuTimeout;
var targetFloatMenu;
var handleMouseoverFloatSubMenu = function(elm) {
	clearTimeout(floatSubMenuTimeout);
};
var handleMouseoutFloatSubMenu = function(elm) {
	floatSubMenuTimeout = setTimeout(function() {
		$('.app-float-submenu').remove();
	}, 250);
};
var handleSidebarMinifyFloatMenu = function() {
	$(document).on('click', '.app-float-submenu .menu-item.has-sub > .menu-link', function(e) {
		e.preventDefault();
		
		var target = $(this).next('.menu-submenu');
		$(target).slideToggle(250, function() {
			var targetMenu = $('.app-float-submenu');
			var targetHeight = $(targetMenu).height() + 20;
			var targetOffset = $(targetMenu).offset();
			var targetTop = $(targetMenu).attr('data-offset-top');
			var windowHeight = $(window).height();
			if ((windowHeight - targetTop) > targetHeight) {
				$('.app-float-submenu').css({
					'top': targetTop,
					'bottom': 'auto',
					'overflow': 'initial'
				});
			} else {
				$('.app-float-submenu').css({
					'bottom': 0,
					'overflow': 'scroll'
				});
			}
		});
	});
	$(document).on('mouseover', '.app-sidebar-minified .app-sidebar .menu .menu-item.has-sub > .menu-link', function() {
		clearTimeout(floatSubMenuTimeout);
		
		var targetMenu = $(this).closest('.menu-item').find('.menu-submenu').first();
		if (targetFloatMenu == this) {
			return false;
		} else {
			targetFloatMenu = this;
		}
		var targetMenuHtml = $(targetMenu).html();
		
		if (targetMenuHtml) {
			var targetHeight = $(targetMenu).height() + 20;
			var targetOffset = $(this).offset();
			var targetTop = targetOffset.top - $(window).scrollTop();
			var targetLeft = ($('body').css('direction') != 'rtl') ? $('#sidebar').width() + $('#sidebar').offset().left : 'auto';
			var targetRight = ($('body').css('direction') != 'rtl') ? 'auto' : $('#sidebar').width();
			var windowHeight = $(window).height();
			var submenuHeight = 0;
			
			if ($('.app-float-submenu').length == 0) {
				targetMenuHtml = '<div class="app-float-submenu" data-offset-top="'+ targetTop +'" onmouseover="handleMouseoverFloatSubMenu(this)" onmouseout="handleMouseoutFloatSubMenu(this)">' + targetMenuHtml + '</div>';
				$('body').append(targetMenuHtml);
			} else {
				$('.app-float-submenu').html(targetMenuHtml);
			}
			submenuHeight = $('.app-float-submenu').height();
			if ((windowHeight - targetTop) > targetHeight && ((targetTop + submenuHeight) < windowHeight)) {
				$('.app-float-submenu').css({
					'top': targetTop,
					'left': targetLeft,
					'bottom': 'auto',
					'right': targetRight
				});
			} else {
				$('.app-float-submenu').css({
					'bottom': 0,
					'top': 'auto',
					'left': targetLeft,
					'right': targetRight
				});
			}
		} else {
			$('.app-float-submenu').remove();
			targetFloatMenu = '';
		}
	});
	$(document).on('mouseout', '.app-sidebar-minified .app-sidebar .menu > .menu-item.has-sub > .menu-link', function() {
		floatSubMenuTimeout = setTimeout(function() {
			$('.app-float-submenu').remove();
			targetFloatMenu = '';
		}, 250);
	});
}


/* 07. Handle Dropdown Close Option
------------------------------------------------ */
var handleDropdownClose = function() {
	$(document).on('click', '[data-dropdown-close="false"]', function(e) {
		e.stopPropagation();
	});
};


/* 08. Handle Card - Remove / Reload / Collapse / Expand
------------------------------------------------ */
var cardActionRunning = false;
var handleCardAction = function() {
	"use strict";

	if (cardActionRunning) {
		return false;
	}
	cardActionRunning = true;

	// expand
	$(document).on('mouseover', '[data-toggle=card-expand]', function(e) {
		if (!$(this).attr('data-init')) {
			$(this).tooltip({
				title: 'Expand / Compress',
				placement: 'bottom',
				trigger: 'hover',
				container: 'body'
			});
			$(this).tooltip('show');
			$(this).attr('data-init', true);
		}
	});
	$(document).on('click', '[data-toggle=card-expand]', function(e) {
		e.preventDefault();
		var target = $(this).closest('.card');
		var targetBody = $(target).find('.card-body');
		var targetClass = 'card-expand';
		var targetTop = 40;
		if ($(targetBody).length !== 0) {
			var targetOffsetTop = $(target).offset().top;
			var targetBodyOffsetTop = $(targetBody).offset().top;
			targetTop = targetBodyOffsetTop - targetOffsetTop;
		}

		if ($('body').hasClass(targetClass) && $(target).hasClass(targetClass)) {
			$('body, .card').removeClass(targetClass);
			$('.card').removeAttr('style');
			$(targetBody).removeAttr('style');
		} else {
			$('body').addClass(targetClass);
			$(this).closest('.card').addClass(targetClass);
		}
		$(window).trigger('resize');
	});
};


/* 09. Handle Tooltip & Popover Activation
------------------------------------------------ */
var handelTooltipPopoverActivation = function() {
	"use strict";
	if ($('[data-toggle="tooltip"]').length !== 0) {
		$('[data-toggle=tooltip]').tooltip();
	}
	if ($('[data-toggle="popover"]').length !== 0) {
		$('[data-toggle=popover]').popover();
	}
};


/* 10. Handle Scroll to Top Button Activation
------------------------------------------------ */
var handleScrollToTopButton = function() {
	"use strict";
	$(document).on('scroll', function() {
		var totalScroll = $(document).scrollTop();

		if (totalScroll >= 200) {
			$('[data-click=scroll-top]').addClass('show');
		} else {
			$('[data-click=scroll-top]').removeClass('show');
		}
	});
	$('[data-click=scroll-top]').on('click', function(e) {
		e.preventDefault();
		$('html, body, .content').animate({
			scrollTop: $("body").offset().top
		}, 500);
	});
};


/* 11. Handle hexToRgba
------------------------------------------------ */
var hexToRgba = function(hex, transparent = 1) {
	var c;
	if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex)){
			c= hex.substring(1).split('');
			if(c.length== 3){
					c= [c[0], c[0], c[1], c[1], c[2], c[2]];
			}
			c= '0x'+c.join('');
			return 'rgba('+[(c>>16)&255, (c>>8)&255, c&255].join(',')+','+ transparent +')';
	}
  throw new Error('Bad Hex');
};


/* 12. Handle Scroll to
------------------------------------------------ */
var handleScrollTo = function() {
	$(document).on('click', '[data-toggle="scroll-to"]', function(e) {
		e.preventDefault();
		
		var targetElm = ($(this).attr('data-target')) ? $(this).attr('data-target') : $(this).attr('href');
		if (targetElm) {
			$('html, body').animate({
				scrollTop: $(targetElm).offset().top - $('#header').height() - 24
			}, 0);
		}
	});
};


/* Application Controller
------------------------------------------------ */
var App = function () {
	"use strict";
	
	return {
		//main function
		init: function () {
			this.initSidebar();
			this.initHeader();
			this.initComponent();
		},
		initSidebar: function() {
			handleSidebarMinifyFloatMenu();
			handleSidebarMenu();
			handleSidebarMinify();
			handleSidebarMobileToggle();
			handleSidebarMobileDismiss();
		},
		initHeader: function() {
		},
		initComponent: function() {
			handleSlimScroll();
			handleCardAction();
			handelTooltipPopoverActivation();
			handleScrollToTopButton();
			handleDropdownClose();
			handleScrollTo();
		},
		scrollTop: function() {
			$('html, body, .content').animate({
				scrollTop: $('body').offset().top
			}, 0);
		}
	};
}();

$(document).ready(function() {
	App.init();
});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcblRlbXBsYXRlIE5hbWU6IEFTUFNUVURJTyAtIFJlc3BvbnNpdmUgQm9vdHN0cmFwIDUgQWRtaW4gVGVtcGxhdGVcblZlcnNpb246IDIuMy4wXG5BdXRob3I6IFNlYW4gTmd1XG5XZWJzaXRlOiBodHRwOi8vd3d3LnNlYW50aGVtZS5jb20vYXNwLXN0dWRpby9cblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdEFQUFMgQ09OVEVOVCBUQUJMRVxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblx0PCEtLSA9PT09PT09PSBHTE9CQUwgU0NSSVBUIFNFVFRJTkcgPT09PT09PT0gLS0+XG5cdDAxLiBHbG9iYWwgVmFyaWFibGVcblx0MDIuIEhhbmRsZSBTY3JvbGxiYXJcblx0MDMuIEhhbmRsZSBIZWFkZXIgU2VhcmNoIEJhclxuXHQwNC4gSGFuZGxlIFNpZGViYXIgTWVudVxuXHQwNS4gSGFuZGxlIFNpZGViYXIgTWluaWZ5XG5cdDA2LiBIYW5kbGUgU2lkZWJhciBNaW5pZnkgRmxvYXQgTWVudVxuXHQwNy4gSGFuZGxlIERyb3Bkb3duIENsb3NlIE9wdGlvblxuXHQwOC4gSGFuZGxlIFBhbmVsIC0gUmVtb3ZlIC8gUmVsb2FkIC8gQ29sbGFwc2UgLyBFeHBhbmRcblx0MDkuIEhhbmRsZSBUb29sdGlwICYgUG9wb3ZlciBBY3RpdmF0aW9uXG5cdDEwLiBIYW5kbGUgU2Nyb2xsIHRvIFRvcCBCdXR0b24gQWN0aXZhdGlvblxuXHQxMS4gSGFuZGxlIGhleFRvUmdiYVxuXHQxMi4gSGFuZGxlIFNjcm9sbCB0b1xuXHRcblx0PCEtLSA9PT09PT09PSBBUFBMSUNBVElPTiBTRVRUSU5HID09PT09PT09IC0tPlxuXHRBcHBsaWNhdGlvbiBDb250cm9sbGVyXG4qL1xuXG5cblxuLyogMDEuIEdsb2JhbCBWYXJpYWJsZVxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG52YXIgRk9OVF9GQU1JTFkgICAgPSAnLWFwcGxlLXN5c3RlbSxCbGlua01hY1N5c3RlbUZvbnQsXCJTZWdvZSBVSVwiLFJvYm90byxcIkhlbHZldGljYSBOZXVlXCIsQXJpYWwsXCJOb3RvIFNhbnNcIixzYW5zLXNlcmlmLFwiQXBwbGUgQ29sb3IgRW1vamlcIixcIlNlZ29lIFVJIEVtb2ppXCIsXCJTZWdvZSBVSSBTeW1ib2xcIixcIk5vdG8gQ29sb3IgRW1vamlcIic7XG52YXIgQ09MT1JfQkxVRSAgICAgPSAnIzFmNmJmZic7XG52YXIgQ09MT1JfR1JFRU4gICAgPSAnIzFhYmQzNic7XG52YXIgQ09MT1JfT1JBTkdFICAgPSAnI2ZmOTUwMCc7XG52YXIgQ09MT1JfUkVEICAgICAgPSAnI2ZmM2IzMCc7XG52YXIgQ09MT1JfQVFVQSAgICAgPSAnIzMwYmVmZic7XG52YXIgQ09MT1JfUFVSUExFICAgPSAnIzViMmU5MSc7XG52YXIgQ09MT1JfWUVMTE9XICAgPSAnI2ZmY2MwMCc7XG52YXIgQ09MT1JfSU5ESUdPICAgPSAnIzY0MGRmMyc7XG52YXIgQ09MT1JfUElOSyAgICAgPSAnI2ZmMmQ1NSc7XG52YXIgQ09MT1JfVEVBTCAgICAgPSAnIzBjZDA5Nic7XG52YXIgQ09MT1JfQkxBQ0sgICAgPSAnIzAwMDAwMCc7XG52YXIgQ09MT1JfV0hJVEUgICAgPSAnI0ZGRkZGRic7XG52YXIgQ09MT1JfR1JBWV8xMDAgPSAnI2ViZWVmNCc7XG52YXIgQ09MT1JfR1JBWV8yMDAgPSAnI2RhZTBlYyc7XG52YXIgQ09MT1JfR1JBWV8zMDAgPSAnI2M5ZDJlMyc7XG52YXIgQ09MT1JfR1JBWV80MDAgPSAnI2E4YjZkMSc7XG52YXIgQ09MT1JfR1JBWV81MDAgPSAnIzg2OWFjMCc7XG52YXIgQ09MT1JfR1JBWV82MDAgPSAnIzY1N2VhZSc7XG52YXIgQ09MT1JfR1JBWV83MDAgPSAnIzRkNjU5Myc7XG52YXIgQ09MT1JfR1JBWV84MDAgPSAnIzNjNGU3MSc7XG52YXIgQ09MT1JfR1JBWV85MDAgPSAnIzIxMjgzNyc7XG5cblxuLyogMDIuIEhhbmRsZSBTY3JvbGxiYXJcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xudmFyIGhhbmRsZVNsaW1TY3JvbGwgPSBmdW5jdGlvbigpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdCQud2hlbigkKCdbZGF0YS1zY3JvbGxiYXI9dHJ1ZV0nKS5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRnZW5lcmF0ZVNsaW1TY3JvbGwoJCh0aGlzKSk7XG5cdH0pKS5kb25lKGZ1bmN0aW9uKCkge1xuXHRcdCQoJ1tkYXRhLXNjcm9sbGJhcj1cInRydWVcIl0nKS5tb3VzZW92ZXIoKTtcblx0fSk7XG59O1xudmFyIGdlbmVyYXRlU2xpbVNjcm9sbCA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcblx0dmFyIGlzTW9iaWxlID0gKC9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8QmxhY2tCZXJyeXxJRU1vYmlsZXxPcGVyYSBNaW5pL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSk7XG5cdFxuXHRpZiAoJChlbGVtZW50KS5hdHRyKCdkYXRhLWluaXQnKSB8fCAoaXNNb2JpbGUgJiYgJChlbGVtZW50KS5hdHRyKCdkYXRhLXNraXAtbW9iaWxlJykpKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cdHZhciBkYXRhSGVpZ2h0ID0gJChlbGVtZW50KS5hdHRyKCdkYXRhLWhlaWdodCcpO1xuXHRcdGRhdGFIZWlnaHQgPSAoIWRhdGFIZWlnaHQpID8gJChlbGVtZW50KS5oZWlnaHQoKSA6IGRhdGFIZWlnaHQ7XG5cblx0dmFyIHNjcm9sbEJhck9wdGlvbiA9IHtcblx0XHRoZWlnaHQ6IGRhdGFIZWlnaHQsIFxuXHRcdGFsd2F5c1Zpc2libGU6IGZhbHNlXG5cdH07XG5cdGlmKGlzTW9iaWxlKSB7XG5cdFx0JChlbGVtZW50KS5jc3MoJ2hlaWdodCcsIGRhdGFIZWlnaHQpO1xuXHRcdCQoZWxlbWVudCkuY3NzKCdvdmVyZmxvdy14Jywnc2Nyb2xsJyk7XG5cdH0gZWxzZSB7XG5cdFx0JChlbGVtZW50KS5zbGltU2Nyb2xsKHNjcm9sbEJhck9wdGlvbik7XG5cdFx0JChlbGVtZW50KS5jbG9zZXN0KCcuc2xpbVNjcm9sbERpdicpLmZpbmQoJy5zbGltU2Nyb2xsQmFyJykuaGlkZSgpO1xuXHR9XG5cdCQoZWxlbWVudCkuYXR0cignZGF0YS1pbml0JywgdHJ1ZSk7XG59O1xuXG5cbi8qIDA0LiBIYW5kbGUgU2lkZWJhciBNZW51XG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbnZhciBoYW5kbGVTaWRlYmFyTWVudSA9IGZ1bmN0aW9uKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5hcHAtc2lkZWJhciAubWVudSA+IC5tZW51LWl0ZW0uaGFzLXN1YiA+IC5tZW51LWxpbmsnLCBmdW5jdGlvbihlKSB7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFxuXHRcdHZhciB0YXJnZXQgPSAkKHRoaXMpLm5leHQoJy5tZW51LXN1Ym1lbnUnKTtcblx0XHR2YXIgb3RoZXJNZW51ID0gJCgnLmFwcC1zaWRlYmFyIC5tZW51ID4gLm1lbnUtaXRlbS5oYXMtc3ViID4gLm1lbnUtc3VibWVudScpLm5vdCh0YXJnZXQpO1xuXG5cdFx0aWYgKCQoJy5hcHAtc2lkZWJhci1taW5pZmllZCcpLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0JChvdGhlck1lbnUpLnNsaWRlVXAoMjUwKTtcblx0XHRcdCQob3RoZXJNZW51KS5jbG9zZXN0KCcubWVudS1pdGVtJykucmVtb3ZlQ2xhc3MoJ2V4cGFuZCcpO1xuXHRcdFx0XG5cdFx0XHQkKHRhcmdldCkuc2xpZGVUb2dnbGUoMjUwKTtcblx0XHRcdHZhciB0YXJnZXRFbG0gPSAkKHRhcmdldCkuY2xvc2VzdCgnLm1lbnUtaXRlbScpO1xuXHRcdFx0aWYgKCQodGFyZ2V0RWxtKS5oYXNDbGFzcygnZXhwYW5kJykpIHtcblx0XHRcdFx0JCh0YXJnZXRFbG0pLnJlbW92ZUNsYXNzKCdleHBhbmQnKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdCQodGFyZ2V0RWxtKS5hZGRDbGFzcygnZXhwYW5kJyk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9KTtcblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5hcHAtc2lkZWJhciAubWVudSA+IC5tZW51LWl0ZW0uaGFzLXN1YiAubWVudS1zdWJtZW51IC5tZW51LWl0ZW0uaGFzLXN1YiA+IC5tZW51LWxpbmsnLCBmdW5jdGlvbihlKSB7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFxuXHRcdGlmICgkKCcuYXBwLXNpZGViYXItbWluaWZpZWQnKS5sZW5ndGggPT09IDApIHtcblx0XHRcdHZhciB0YXJnZXQgPSAkKHRoaXMpLm5leHQoJy5tZW51LXN1Ym1lbnUnKTtcblx0XHRcdCQodGFyZ2V0KS5zbGlkZVRvZ2dsZSgyNTApO1xuXHRcdH1cblx0fSk7XG59O1xuXG5cbi8qIDA1LiBIYW5kbGUgU2lkZWJhciBNaW5pZnlcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xudmFyIE1PQklMRV9TSURFQkFSX1RPR0dMRV9DTEFTUyA9ICdhcHAtc2lkZWJhci1tb2JpbGUtdG9nZ2xlZCc7XG52YXIgTU9CSUxFX1NJREVCQVJfQ0xPU0VEX0NMQVNTID0gJ2FwcC1zaWRlYmFyLW1vYmlsZS1jbG9zZWQnO1xudmFyIGhhbmRsZVNpZGViYXJNaW5pZnkgPSBmdW5jdGlvbigpIHtcblx0JCgnW2RhdGEtdG9nZ2xlPVwic2lkZWJhci1taW5pZnlcIl0nKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFxuXHRcdHZhciB0YXJnZXRFbG0gPSAnI2FwcCc7XG5cdFx0dmFyIHRhcmdldENsYXNzID0gJ2FwcC1zaWRlYmFyLW1pbmlmaWVkJztcblx0XHRcblx0XHRpZiAoJCh0YXJnZXRFbG0pLmhhc0NsYXNzKHRhcmdldENsYXNzKSkge1xuXHRcdFx0JCh0YXJnZXRFbG0pLnJlbW92ZUNsYXNzKHRhcmdldENsYXNzKTtcblx0XHRcdGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdhcHBTaWRlYmFyTWluaWZpZWQnKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JCh0YXJnZXRFbG0pLmFkZENsYXNzKHRhcmdldENsYXNzKTtcblx0XHRcdGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhcHBTaWRlYmFyTWluaWZpZWQnLCB0cnVlKTtcblx0XHR9XG5cdH0pO1xuXHRcblx0aWYgKHR5cGVvZihTdG9yYWdlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRpZiAobG9jYWxTdG9yYWdlLmFwcFNpZGViYXJNaW5pZmllZCkge1xuXHRcdFx0JCgnI2FwcCcpLmFkZENsYXNzKCdhcHAtc2lkZWJhci1taW5pZmllZCcpO1xuXHRcdH1cblx0fVxufTtcbnZhciBoYW5kbGVTaWRlYmFyTW9iaWxlVG9nZ2xlID0gZnVuY3Rpb24oKSB7XG5cdCQoZG9jdW1lbnQpLm9uKCdjbGljaycsICdbZGF0YS10b2dnbGU9XCJzaWRlYmFyLW1vYmlsZVwiXScsIGZ1bmN0aW9uKGUpIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XG5cdFx0dmFyIHRhcmdldEVsbSA9ICcjYXBwJztcblx0XHRcblx0XHQkKHRhcmdldEVsbSkucmVtb3ZlQ2xhc3MoTU9CSUxFX1NJREVCQVJfQ0xPU0VEX0NMQVNTKS5hZGRDbGFzcyhNT0JJTEVfU0lERUJBUl9UT0dHTEVfQ0xBU1MpO1xuXHR9KTtcbn07XG52YXIgaGFuZGxlU2lkZWJhck1vYmlsZURpc21pc3MgPSBmdW5jdGlvbigpIHtcblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJ1tkYXRhLWRpc21pc3M9XCJzaWRlYmFyLW1vYmlsZVwiXScsIGZ1bmN0aW9uKGUpIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XG5cdFx0dmFyIHRhcmdldEVsbSA9ICcjYXBwJztcblx0XHRcblx0XHQkKHRhcmdldEVsbSkucmVtb3ZlQ2xhc3MoTU9CSUxFX1NJREVCQVJfVE9HR0xFX0NMQVNTKS5hZGRDbGFzcyhNT0JJTEVfU0lERUJBUl9DTE9TRURfQ0xBU1MpO1xuXHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHQkKHRhcmdldEVsbSkucmVtb3ZlQ2xhc3MoTU9CSUxFX1NJREVCQVJfQ0xPU0VEX0NMQVNTKTtcblx0XHR9LCAyNTApO1xuXHR9KTtcbn07XG5cblxuLyogMDYuIEhhbmRsZSBTaWRlYmFyIE1pbmlmeSBGbG9hdCBNZW51XG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbnZhciBmbG9hdFN1Yk1lbnVUaW1lb3V0O1xudmFyIHRhcmdldEZsb2F0TWVudTtcbnZhciBoYW5kbGVNb3VzZW92ZXJGbG9hdFN1Yk1lbnUgPSBmdW5jdGlvbihlbG0pIHtcblx0Y2xlYXJUaW1lb3V0KGZsb2F0U3ViTWVudVRpbWVvdXQpO1xufTtcbnZhciBoYW5kbGVNb3VzZW91dEZsb2F0U3ViTWVudSA9IGZ1bmN0aW9uKGVsbSkge1xuXHRmbG9hdFN1Yk1lbnVUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHQkKCcuYXBwLWZsb2F0LXN1Ym1lbnUnKS5yZW1vdmUoKTtcblx0fSwgMjUwKTtcbn07XG52YXIgaGFuZGxlU2lkZWJhck1pbmlmeUZsb2F0TWVudSA9IGZ1bmN0aW9uKCkge1xuXHQkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmFwcC1mbG9hdC1zdWJtZW51IC5tZW51LWl0ZW0uaGFzLXN1YiA+IC5tZW51LWxpbmsnLCBmdW5jdGlvbihlKSB7XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFxuXHRcdHZhciB0YXJnZXQgPSAkKHRoaXMpLm5leHQoJy5tZW51LXN1Ym1lbnUnKTtcblx0XHQkKHRhcmdldCkuc2xpZGVUb2dnbGUoMjUwLCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciB0YXJnZXRNZW51ID0gJCgnLmFwcC1mbG9hdC1zdWJtZW51Jyk7XG5cdFx0XHR2YXIgdGFyZ2V0SGVpZ2h0ID0gJCh0YXJnZXRNZW51KS5oZWlnaHQoKSArIDIwO1xuXHRcdFx0dmFyIHRhcmdldE9mZnNldCA9ICQodGFyZ2V0TWVudSkub2Zmc2V0KCk7XG5cdFx0XHR2YXIgdGFyZ2V0VG9wID0gJCh0YXJnZXRNZW51KS5hdHRyKCdkYXRhLW9mZnNldC10b3AnKTtcblx0XHRcdHZhciB3aW5kb3dIZWlnaHQgPSAkKHdpbmRvdykuaGVpZ2h0KCk7XG5cdFx0XHRpZiAoKHdpbmRvd0hlaWdodCAtIHRhcmdldFRvcCkgPiB0YXJnZXRIZWlnaHQpIHtcblx0XHRcdFx0JCgnLmFwcC1mbG9hdC1zdWJtZW51JykuY3NzKHtcblx0XHRcdFx0XHQndG9wJzogdGFyZ2V0VG9wLFxuXHRcdFx0XHRcdCdib3R0b20nOiAnYXV0bycsXG5cdFx0XHRcdFx0J292ZXJmbG93JzogJ2luaXRpYWwnXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0JCgnLmFwcC1mbG9hdC1zdWJtZW51JykuY3NzKHtcblx0XHRcdFx0XHQnYm90dG9tJzogMCxcblx0XHRcdFx0XHQnb3ZlcmZsb3cnOiAnc2Nyb2xsJ1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9KTtcblx0fSk7XG5cdCQoZG9jdW1lbnQpLm9uKCdtb3VzZW92ZXInLCAnLmFwcC1zaWRlYmFyLW1pbmlmaWVkIC5hcHAtc2lkZWJhciAubWVudSAubWVudS1pdGVtLmhhcy1zdWIgPiAubWVudS1saW5rJywgZnVuY3Rpb24oKSB7XG5cdFx0Y2xlYXJUaW1lb3V0KGZsb2F0U3ViTWVudVRpbWVvdXQpO1xuXHRcdFxuXHRcdHZhciB0YXJnZXRNZW51ID0gJCh0aGlzKS5jbG9zZXN0KCcubWVudS1pdGVtJykuZmluZCgnLm1lbnUtc3VibWVudScpLmZpcnN0KCk7XG5cdFx0aWYgKHRhcmdldEZsb2F0TWVudSA9PSB0aGlzKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRhcmdldEZsb2F0TWVudSA9IHRoaXM7XG5cdFx0fVxuXHRcdHZhciB0YXJnZXRNZW51SHRtbCA9ICQodGFyZ2V0TWVudSkuaHRtbCgpO1xuXHRcdFxuXHRcdGlmICh0YXJnZXRNZW51SHRtbCkge1xuXHRcdFx0dmFyIHRhcmdldEhlaWdodCA9ICQodGFyZ2V0TWVudSkuaGVpZ2h0KCkgKyAyMDtcblx0XHRcdHZhciB0YXJnZXRPZmZzZXQgPSAkKHRoaXMpLm9mZnNldCgpO1xuXHRcdFx0dmFyIHRhcmdldFRvcCA9IHRhcmdldE9mZnNldC50b3AgLSAkKHdpbmRvdykuc2Nyb2xsVG9wKCk7XG5cdFx0XHR2YXIgdGFyZ2V0TGVmdCA9ICgkKCdib2R5JykuY3NzKCdkaXJlY3Rpb24nKSAhPSAncnRsJykgPyAkKCcjc2lkZWJhcicpLndpZHRoKCkgKyAkKCcjc2lkZWJhcicpLm9mZnNldCgpLmxlZnQgOiAnYXV0byc7XG5cdFx0XHR2YXIgdGFyZ2V0UmlnaHQgPSAoJCgnYm9keScpLmNzcygnZGlyZWN0aW9uJykgIT0gJ3J0bCcpID8gJ2F1dG8nIDogJCgnI3NpZGViYXInKS53aWR0aCgpO1xuXHRcdFx0dmFyIHdpbmRvd0hlaWdodCA9ICQod2luZG93KS5oZWlnaHQoKTtcblx0XHRcdHZhciBzdWJtZW51SGVpZ2h0ID0gMDtcblx0XHRcdFxuXHRcdFx0aWYgKCQoJy5hcHAtZmxvYXQtc3VibWVudScpLmxlbmd0aCA9PSAwKSB7XG5cdFx0XHRcdHRhcmdldE1lbnVIdG1sID0gJzxkaXYgY2xhc3M9XCJhcHAtZmxvYXQtc3VibWVudVwiIGRhdGEtb2Zmc2V0LXRvcD1cIicrIHRhcmdldFRvcCArJ1wiIG9ubW91c2VvdmVyPVwiaGFuZGxlTW91c2VvdmVyRmxvYXRTdWJNZW51KHRoaXMpXCIgb25tb3VzZW91dD1cImhhbmRsZU1vdXNlb3V0RmxvYXRTdWJNZW51KHRoaXMpXCI+JyArIHRhcmdldE1lbnVIdG1sICsgJzwvZGl2Pic7XG5cdFx0XHRcdCQoJ2JvZHknKS5hcHBlbmQodGFyZ2V0TWVudUh0bWwpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0JCgnLmFwcC1mbG9hdC1zdWJtZW51JykuaHRtbCh0YXJnZXRNZW51SHRtbCk7XG5cdFx0XHR9XG5cdFx0XHRzdWJtZW51SGVpZ2h0ID0gJCgnLmFwcC1mbG9hdC1zdWJtZW51JykuaGVpZ2h0KCk7XG5cdFx0XHRpZiAoKHdpbmRvd0hlaWdodCAtIHRhcmdldFRvcCkgPiB0YXJnZXRIZWlnaHQgJiYgKCh0YXJnZXRUb3AgKyBzdWJtZW51SGVpZ2h0KSA8IHdpbmRvd0hlaWdodCkpIHtcblx0XHRcdFx0JCgnLmFwcC1mbG9hdC1zdWJtZW51JykuY3NzKHtcblx0XHRcdFx0XHQndG9wJzogdGFyZ2V0VG9wLFxuXHRcdFx0XHRcdCdsZWZ0JzogdGFyZ2V0TGVmdCxcblx0XHRcdFx0XHQnYm90dG9tJzogJ2F1dG8nLFxuXHRcdFx0XHRcdCdyaWdodCc6IHRhcmdldFJpZ2h0XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0JCgnLmFwcC1mbG9hdC1zdWJtZW51JykuY3NzKHtcblx0XHRcdFx0XHQnYm90dG9tJzogMCxcblx0XHRcdFx0XHQndG9wJzogJ2F1dG8nLFxuXHRcdFx0XHRcdCdsZWZ0JzogdGFyZ2V0TGVmdCxcblx0XHRcdFx0XHQncmlnaHQnOiB0YXJnZXRSaWdodFxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0JCgnLmFwcC1mbG9hdC1zdWJtZW51JykucmVtb3ZlKCk7XG5cdFx0XHR0YXJnZXRGbG9hdE1lbnUgPSAnJztcblx0XHR9XG5cdH0pO1xuXHQkKGRvY3VtZW50KS5vbignbW91c2VvdXQnLCAnLmFwcC1zaWRlYmFyLW1pbmlmaWVkIC5hcHAtc2lkZWJhciAubWVudSA+IC5tZW51LWl0ZW0uaGFzLXN1YiA+IC5tZW51LWxpbmsnLCBmdW5jdGlvbigpIHtcblx0XHRmbG9hdFN1Yk1lbnVUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdCQoJy5hcHAtZmxvYXQtc3VibWVudScpLnJlbW92ZSgpO1xuXHRcdFx0dGFyZ2V0RmxvYXRNZW51ID0gJyc7XG5cdFx0fSwgMjUwKTtcblx0fSk7XG59XG5cblxuLyogMDcuIEhhbmRsZSBEcm9wZG93biBDbG9zZSBPcHRpb25cbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xudmFyIGhhbmRsZURyb3Bkb3duQ2xvc2UgPSBmdW5jdGlvbigpIHtcblx0JChkb2N1bWVudCkub24oJ2NsaWNrJywgJ1tkYXRhLWRyb3Bkb3duLWNsb3NlPVwiZmFsc2VcIl0nLCBmdW5jdGlvbihlKSB7XG5cdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0fSk7XG59O1xuXG5cbi8qIDA4LiBIYW5kbGUgQ2FyZCAtIFJlbW92ZSAvIFJlbG9hZCAvIENvbGxhcHNlIC8gRXhwYW5kXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbnZhciBjYXJkQWN0aW9uUnVubmluZyA9IGZhbHNlO1xudmFyIGhhbmRsZUNhcmRBY3Rpb24gPSBmdW5jdGlvbigpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0aWYgKGNhcmRBY3Rpb25SdW5uaW5nKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdGNhcmRBY3Rpb25SdW5uaW5nID0gdHJ1ZTtcblxuXHQvLyBleHBhbmRcblx0JChkb2N1bWVudCkub24oJ21vdXNlb3ZlcicsICdbZGF0YS10b2dnbGU9Y2FyZC1leHBhbmRdJywgZnVuY3Rpb24oZSkge1xuXHRcdGlmICghJCh0aGlzKS5hdHRyKCdkYXRhLWluaXQnKSkge1xuXHRcdFx0JCh0aGlzKS50b29sdGlwKHtcblx0XHRcdFx0dGl0bGU6ICdFeHBhbmQgLyBDb21wcmVzcycsXG5cdFx0XHRcdHBsYWNlbWVudDogJ2JvdHRvbScsXG5cdFx0XHRcdHRyaWdnZXI6ICdob3ZlcicsXG5cdFx0XHRcdGNvbnRhaW5lcjogJ2JvZHknXG5cdFx0XHR9KTtcblx0XHRcdCQodGhpcykudG9vbHRpcCgnc2hvdycpO1xuXHRcdFx0JCh0aGlzKS5hdHRyKCdkYXRhLWluaXQnLCB0cnVlKTtcblx0XHR9XG5cdH0pO1xuXHQkKGRvY3VtZW50KS5vbignY2xpY2snLCAnW2RhdGEtdG9nZ2xlPWNhcmQtZXhwYW5kXScsIGZ1bmN0aW9uKGUpIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0dmFyIHRhcmdldCA9ICQodGhpcykuY2xvc2VzdCgnLmNhcmQnKTtcblx0XHR2YXIgdGFyZ2V0Qm9keSA9ICQodGFyZ2V0KS5maW5kKCcuY2FyZC1ib2R5Jyk7XG5cdFx0dmFyIHRhcmdldENsYXNzID0gJ2NhcmQtZXhwYW5kJztcblx0XHR2YXIgdGFyZ2V0VG9wID0gNDA7XG5cdFx0aWYgKCQodGFyZ2V0Qm9keSkubGVuZ3RoICE9PSAwKSB7XG5cdFx0XHR2YXIgdGFyZ2V0T2Zmc2V0VG9wID0gJCh0YXJnZXQpLm9mZnNldCgpLnRvcDtcblx0XHRcdHZhciB0YXJnZXRCb2R5T2Zmc2V0VG9wID0gJCh0YXJnZXRCb2R5KS5vZmZzZXQoKS50b3A7XG5cdFx0XHR0YXJnZXRUb3AgPSB0YXJnZXRCb2R5T2Zmc2V0VG9wIC0gdGFyZ2V0T2Zmc2V0VG9wO1xuXHRcdH1cblxuXHRcdGlmICgkKCdib2R5JykuaGFzQ2xhc3ModGFyZ2V0Q2xhc3MpICYmICQodGFyZ2V0KS5oYXNDbGFzcyh0YXJnZXRDbGFzcykpIHtcblx0XHRcdCQoJ2JvZHksIC5jYXJkJykucmVtb3ZlQ2xhc3ModGFyZ2V0Q2xhc3MpO1xuXHRcdFx0JCgnLmNhcmQnKS5yZW1vdmVBdHRyKCdzdHlsZScpO1xuXHRcdFx0JCh0YXJnZXRCb2R5KS5yZW1vdmVBdHRyKCdzdHlsZScpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkKCdib2R5JykuYWRkQ2xhc3ModGFyZ2V0Q2xhc3MpO1xuXHRcdFx0JCh0aGlzKS5jbG9zZXN0KCcuY2FyZCcpLmFkZENsYXNzKHRhcmdldENsYXNzKTtcblx0XHR9XG5cdFx0JCh3aW5kb3cpLnRyaWdnZXIoJ3Jlc2l6ZScpO1xuXHR9KTtcbn07XG5cblxuLyogMDkuIEhhbmRsZSBUb29sdGlwICYgUG9wb3ZlciBBY3RpdmF0aW9uXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbnZhciBoYW5kZWxUb29sdGlwUG9wb3ZlckFjdGl2YXRpb24gPSBmdW5jdGlvbigpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdGlmICgkKCdbZGF0YS10b2dnbGU9XCJ0b29sdGlwXCJdJykubGVuZ3RoICE9PSAwKSB7XG5cdFx0JCgnW2RhdGEtdG9nZ2xlPXRvb2x0aXBdJykudG9vbHRpcCgpO1xuXHR9XG5cdGlmICgkKCdbZGF0YS10b2dnbGU9XCJwb3BvdmVyXCJdJykubGVuZ3RoICE9PSAwKSB7XG5cdFx0JCgnW2RhdGEtdG9nZ2xlPXBvcG92ZXJdJykucG9wb3ZlcigpO1xuXHR9XG59O1xuXG5cbi8qIDEwLiBIYW5kbGUgU2Nyb2xsIHRvIFRvcCBCdXR0b24gQWN0aXZhdGlvblxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG52YXIgaGFuZGxlU2Nyb2xsVG9Ub3BCdXR0b24gPSBmdW5jdGlvbigpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdCQoZG9jdW1lbnQpLm9uKCdzY3JvbGwnLCBmdW5jdGlvbigpIHtcblx0XHR2YXIgdG90YWxTY3JvbGwgPSAkKGRvY3VtZW50KS5zY3JvbGxUb3AoKTtcblxuXHRcdGlmICh0b3RhbFNjcm9sbCA+PSAyMDApIHtcblx0XHRcdCQoJ1tkYXRhLWNsaWNrPXNjcm9sbC10b3BdJykuYWRkQ2xhc3MoJ3Nob3cnKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JCgnW2RhdGEtY2xpY2s9c2Nyb2xsLXRvcF0nKS5yZW1vdmVDbGFzcygnc2hvdycpO1xuXHRcdH1cblx0fSk7XG5cdCQoJ1tkYXRhLWNsaWNrPXNjcm9sbC10b3BdJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHQkKCdodG1sLCBib2R5LCAuY29udGVudCcpLmFuaW1hdGUoe1xuXHRcdFx0c2Nyb2xsVG9wOiAkKFwiYm9keVwiKS5vZmZzZXQoKS50b3Bcblx0XHR9LCA1MDApO1xuXHR9KTtcbn07XG5cblxuLyogMTEuIEhhbmRsZSBoZXhUb1JnYmFcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xudmFyIGhleFRvUmdiYSA9IGZ1bmN0aW9uKGhleCwgdHJhbnNwYXJlbnQgPSAxKSB7XG5cdHZhciBjO1xuXHRpZigvXiMoW0EtRmEtZjAtOV17M30pezEsMn0kLy50ZXN0KGhleCkpe1xuXHRcdFx0Yz0gaGV4LnN1YnN0cmluZygxKS5zcGxpdCgnJyk7XG5cdFx0XHRpZihjLmxlbmd0aD09IDMpe1xuXHRcdFx0XHRcdGM9IFtjWzBdLCBjWzBdLCBjWzFdLCBjWzFdLCBjWzJdLCBjWzJdXTtcblx0XHRcdH1cblx0XHRcdGM9ICcweCcrYy5qb2luKCcnKTtcblx0XHRcdHJldHVybiAncmdiYSgnK1soYz4+MTYpJjI1NSwgKGM+PjgpJjI1NSwgYyYyNTVdLmpvaW4oJywnKSsnLCcrIHRyYW5zcGFyZW50ICsnKSc7XG5cdH1cbiAgdGhyb3cgbmV3IEVycm9yKCdCYWQgSGV4Jyk7XG59O1xuXG5cbi8qIDEyLiBIYW5kbGUgU2Nyb2xsIHRvXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbnZhciBoYW5kbGVTY3JvbGxUbyA9IGZ1bmN0aW9uKCkge1xuXHQkKGRvY3VtZW50KS5vbignY2xpY2snLCAnW2RhdGEtdG9nZ2xlPVwic2Nyb2xsLXRvXCJdJywgZnVuY3Rpb24oZSkge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcblx0XHR2YXIgdGFyZ2V0RWxtID0gKCQodGhpcykuYXR0cignZGF0YS10YXJnZXQnKSkgPyAkKHRoaXMpLmF0dHIoJ2RhdGEtdGFyZ2V0JykgOiAkKHRoaXMpLmF0dHIoJ2hyZWYnKTtcblx0XHRpZiAodGFyZ2V0RWxtKSB7XG5cdFx0XHQkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XG5cdFx0XHRcdHNjcm9sbFRvcDogJCh0YXJnZXRFbG0pLm9mZnNldCgpLnRvcCAtICQoJyNoZWFkZXInKS5oZWlnaHQoKSAtIDI0XG5cdFx0XHR9LCAwKTtcblx0XHR9XG5cdH0pO1xufTtcblxuXG4vKiBBcHBsaWNhdGlvbiBDb250cm9sbGVyXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbnZhciBBcHAgPSBmdW5jdGlvbiAoKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0cmV0dXJuIHtcblx0XHQvL21haW4gZnVuY3Rpb25cblx0XHRpbml0OiBmdW5jdGlvbiAoKSB7XG5cdFx0XHR0aGlzLmluaXRTaWRlYmFyKCk7XG5cdFx0XHR0aGlzLmluaXRIZWFkZXIoKTtcblx0XHRcdHRoaXMuaW5pdENvbXBvbmVudCgpO1xuXHRcdH0sXG5cdFx0aW5pdFNpZGViYXI6IGZ1bmN0aW9uKCkge1xuXHRcdFx0aGFuZGxlU2lkZWJhck1pbmlmeUZsb2F0TWVudSgpO1xuXHRcdFx0aGFuZGxlU2lkZWJhck1lbnUoKTtcblx0XHRcdGhhbmRsZVNpZGViYXJNaW5pZnkoKTtcblx0XHRcdGhhbmRsZVNpZGViYXJNb2JpbGVUb2dnbGUoKTtcblx0XHRcdGhhbmRsZVNpZGViYXJNb2JpbGVEaXNtaXNzKCk7XG5cdFx0fSxcblx0XHRpbml0SGVhZGVyOiBmdW5jdGlvbigpIHtcblx0XHR9LFxuXHRcdGluaXRDb21wb25lbnQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0aGFuZGxlU2xpbVNjcm9sbCgpO1xuXHRcdFx0aGFuZGxlQ2FyZEFjdGlvbigpO1xuXHRcdFx0aGFuZGVsVG9vbHRpcFBvcG92ZXJBY3RpdmF0aW9uKCk7XG5cdFx0XHRoYW5kbGVTY3JvbGxUb1RvcEJ1dHRvbigpO1xuXHRcdFx0aGFuZGxlRHJvcGRvd25DbG9zZSgpO1xuXHRcdFx0aGFuZGxlU2Nyb2xsVG8oKTtcblx0XHR9LFxuXHRcdHNjcm9sbFRvcDogZnVuY3Rpb24oKSB7XG5cdFx0XHQkKCdodG1sLCBib2R5LCAuY29udGVudCcpLmFuaW1hdGUoe1xuXHRcdFx0XHRzY3JvbGxUb3A6ICQoJ2JvZHknKS5vZmZzZXQoKS50b3Bcblx0XHRcdH0sIDApO1xuXHRcdH1cblx0fTtcbn0oKTtcblxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cdEFwcC5pbml0KCk7XG59KTsiXX0=
